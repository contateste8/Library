local Players = game:GetService("Players")
local player = Players.LocalPlayer

local Library = {}

function Library:CreateWindow(title)
    local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
    ScreenGui.Name = "UI_Library"
    ScreenGui.IgnoreGuiInset = true
    ScreenGui.ResetOnSpawn = false

    local MainFrame = Instance.new("Frame", ScreenGui)
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.Size = UDim2.new(0, 400, 0, 300)
    MainFrame.BackgroundTransparency = 0.3
    MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    MainFrame.BorderSizePixel = 0
    MainFrame.Active = true
    MainFrame.Draggable = true

    local Header = Instance.new("Frame", MainFrame)
    Header.Size = UDim2.new(1, 0, 0, 30)
    Header.BackgroundTransparency = 1

    local Title = Instance.new("TextLabel", Header)
    Title.Size = UDim2.new(1, -60, 1, 0)
    Title.Position = UDim2.new(0, 10, 0, 0)
    Title.Text = title or "Meu menu."
    Title.TextColor3 = Color3.new(1, 1, 1)
    Title.BackgroundTransparency = 1
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 16
    Title.TextXAlignment = Enum.TextXAlignment.Left

    local Minimize = Instance.new("TextButton", Header)
    Minimize.Text = "—"
    Minimize.Size = UDim2.new(0, 25, 1, 0)
    Minimize.Position = UDim2.new(1, -50, 0, 0)
    Minimize.TextColor3 = Color3.new(1, 1, 1)
    Minimize.BackgroundTransparency = 1
    Minimize.Font = Enum.Font.GothamBold
    Minimize.TextSize = 16

    local Close = Instance.new("TextButton", Header)
    Close.Text = "X"
    Close.Size = UDim2.new(0, 25, 1, 0)
    Close.Position = UDim2.new(1, -25, 0, 0)
    Close.TextColor3 = Color3.new(1, 1, 1)
    Close.BackgroundTransparency = 1
    Close.Font = Enum.Font.GothamBold
    Close.TextSize = 16

    local Content = Instance.new("Frame", MainFrame)
    Content.Position = UDim2.new(0, 0, 0, 30)
    Content.Size = UDim2.new(1, 0, 1, -30)
    Content.BackgroundTransparency = 1

    local TabBar = Instance.new("Frame", Content)
    TabBar.Size = UDim2.new(0, 70, 1, 0)
    TabBar.BackgroundTransparency = 1
    TabBar.Position = UDim2.new(0, 0, 0, 0)

    local Body = Instance.new("Frame", Content)
    Body.Position = UDim2.new(0, 70, 0, 0)
    Body.Size = UDim2.new(1, -70, 1, -60)
    Body.BackgroundTransparency = 1

    local Avatar = Instance.new("ImageLabel", Content)
    Avatar.Position = UDim2.new(0, 80, 1, -55)
    Avatar.Size = UDim2.new(0, 40, 0, 40)
    Avatar.BackgroundTransparency = 1
    Avatar.Image = Players:GetUserThumbnailAsync(player.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size100x100)

    local Username = Instance.new("TextLabel", Content)
    Username.Position = UDim2.new(0, 130, 1, -45)
    Username.Size = UDim2.new(0, 200, 0, 20)
    Username.Text = player.Name
    Username.TextColor3 = Color3.new(1, 1, 1)
    Username.BackgroundTransparency = 1
    Username.Font = Enum.Font.Gotham
    Username.TextSize = 14
    Username.TextXAlignment = Enum.TextXAlignment.Left

    local minimized = false
    Minimize.MouseButton1Click:Connect(function()
        minimized = not minimized
        if minimized then
            Minimize.Text = "+"
            Content.Visible = false
            MainFrame.Size = UDim2.new(0, 400, 0, 30)
        else
            Minimize.Text = "—"
            Content.Visible = true
            MainFrame.Size = UDim2.new(0, 400, 0, 300)
        end
    end)

    Close.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)

    return {
        TabBar = TabBar,
        Body = Body
    }
end

return Library
